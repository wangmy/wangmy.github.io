<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>é¢è¯• on YoyoWong</title>
        <link>/categories/%E9%9D%A2%E8%AF%95/</link>
        <description>Recent content in é¢è¯• on YoyoWong</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>zh-cn</language>
        <lastBuildDate>Fri, 15 Mar 2019 00:00:00 +0000</lastBuildDate><atom:link href="/categories/%E9%9D%A2%E8%AF%95/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>åˆ†æ åœ¨OCä¸­ [self class] ä¸ [super class] çš„åŒºåˆ«</title>
        <link>/p/%E5%88%86%E6%9E%90-%E5%9C%A8oc%E4%B8%AD-self-class-%E4%B8%8E-super-class-%E7%9A%84%E5%8C%BA%E5%88%AB/</link>
        <pubDate>Fri, 15 Mar 2019 00:00:00 +0000</pubDate>
        
        <guid>/p/%E5%88%86%E6%9E%90-%E5%9C%A8oc%E4%B8%AD-self-class-%E4%B8%8E-super-class-%E7%9A%84%E5%8C%BA%E5%88%AB/</guid>
        <description>&lt;h2 id=&#34;ç›´æ¥çœ‹ä¸€æ®µä»£ç &#34;&gt;ç›´æ¥çœ‹ä¸€æ®µä»£ç &lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;@interface Person : NSObject
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;@end
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;@implementation Person
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;@end
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;@interface Worker : Person
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;@end
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;@implementation Worker
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- (instancetype)init{
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    self = [super init];
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    if (self) {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        NSLog(@&amp;#34;ğŸ¦ï¸ [self class] %@&amp;#34;,NSStringFromClass([self class]));
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        NSLog(@&amp;#34;ğŸ¦ï¸ [super class] %@&amp;#34;,NSStringFromClass([super class]));
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    return self;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;@end
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;@implementation TestSuperClass
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// åˆ†æ [self class] ä¸ [super class] çš„åŒºåˆ«
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- (void) test {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    Worker *worker = [[Worker alloc] init];
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;@end
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id=&#34;æ‰“å°ç»“æœ&#34;&gt;æ‰“å°ç»“æœ&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;2022-04-09 19:08:09.612737+0800 Object-CDemo[68945:1164926] ğŸ¦ï¸ [self class] Worker
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;2022-04-09 19:08:09.612854+0800 Object-CDemo[68945:1164926] ğŸ¦ï¸ [super class] Worker
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;æ±‡ç¼–æ–­ç‚¹--æºç é…åˆ&#34;&gt;æ±‡ç¼–æ–­ç‚¹ + æºç é…åˆ&lt;/h2&gt;
&lt;p&gt;è®¾ç½®æ–­ç‚¹çš„æ±‡ç¼–æ¨¡å¼
&lt;img src=&#34;/p/%E5%88%86%E6%9E%90-%E5%9C%A8oc%E4%B8%AD-self-class-%E4%B8%8E-super-class-%E7%9A%84%E5%8C%BA%E5%88%AB/16693655307026.jpg&#34;
	width=&#34;1240&#34;
	height=&#34;775&#34;
	srcset=&#34;/p/%E5%88%86%E6%9E%90-%E5%9C%A8oc%E4%B8%AD-self-class-%E4%B8%8E-super-class-%E7%9A%84%E5%8C%BA%E5%88%AB/16693655307026_hu0672f2f4967cca70e45bdf69c5027340_202111_480x0_resize_q75_box.jpg 480w, /p/%E5%88%86%E6%9E%90-%E5%9C%A8oc%E4%B8%AD-self-class-%E4%B8%8E-super-class-%E7%9A%84%E5%8C%BA%E5%88%AB/16693655307026_hu0672f2f4967cca70e45bdf69c5027340_202111_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;160&#34;
		data-flex-basis=&#34;384px&#34;
	
&gt;
è¿›å…¥æ–­ç‚¹
&lt;img src=&#34;/p/%E5%88%86%E6%9E%90-%E5%9C%A8oc%E4%B8%AD-self-class-%E4%B8%8E-super-class-%E7%9A%84%E5%8C%BA%E5%88%AB/16693656519939.jpg&#34;
	width=&#34;1024&#34;
	height=&#34;689&#34;
	srcset=&#34;/p/%E5%88%86%E6%9E%90-%E5%9C%A8oc%E4%B8%AD-self-class-%E4%B8%8E-super-class-%E7%9A%84%E5%8C%BA%E5%88%AB/16693656519939_huf5c82fdbe0407546c33c0e812615699f_213774_480x0_resize_q75_box.jpg 480w, /p/%E5%88%86%E6%9E%90-%E5%9C%A8oc%E4%B8%AD-self-class-%E4%B8%8E-super-class-%E7%9A%84%E5%8C%BA%E5%88%AB/16693656519939_huf5c82fdbe0407546c33c0e812615699f_213774_1024x0_resize_q75_box.jpg 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;148&#34;
		data-flex-basis=&#34;356px&#34;
	
&gt;
è¿™é‡Œæ˜¾è€Œæ˜“è§ [super class] æœ€ç»ˆèµ°çš„æ˜¯objc_msgSendSuper2æ¶ˆæ¯å‘é€ï¼Œå†ç»“åˆæºç ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;objc_msgSendSuper2(struct objc_super * _Nonnull super, SEL _Nonnull op, ...)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// é€šè¿‡objcæºç é‡Œé¢ç®€åŒ– objc_super
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;struct objc_super { 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    __unsafe_unretained _Nonnull id receiver; //æ¶ˆæ¯æ¥æ”¶è€…,éšè—å‚æ•° self
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    __unsafe_unretained _Nonnull Class super_class;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;};
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;// [super class] ç­‰åŒäºä¸‹é¢ä¸€æ®µä»£ç 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;struct objc_super test_super = {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      self, // ç ”ç©¶å¯¹è±¡æ˜¯åœ¨workeré‡Œé¢
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      class_getSuperclass([self class]),
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;};
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ä¹Ÿå°±æ˜¯NSLog(@&amp;#34;ğŸ¦ï¸ [super class] %@&amp;#34;,NSStringFromClass([super class])) ç­‰åŒäºä¸‹é¢çš„ä¸€æ®µä»£ç 
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;NSLog(@&amp;#34;%@&amp;#34;,NSStringFromClass(objc_msgSendSuper2(&amp;amp;test_super,@selector(class))));
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;è½¬åŒ–åå¾ˆå¥½ç†è§£äº†ï¼Œå…¶å®å°±æ˜¯ç»™selfï¼ˆworkerå®ä¾‹ï¼‰å‘é€æ¶ˆæ¯ï¼Œè°ƒç”¨classæ–¹æ³•ã€‚è¿™æ ·å°±èƒ½ç†è§£æ‰“å°ç»“æœä¸ºä»€ä¹ˆä¸€æ ·ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å…¶ä»–åˆ†ææ€è·¯&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;clang çœ‹åˆ°åº•åº•å±‚ç¼–è¯‘æˆä»€ä¹ˆæ ·çš„æºç &lt;/li&gt;
&lt;li&gt;objcæºç  runèµ·æ¥ï¼Œç›´æ¥æ–­ç‚¹åˆ†æåˆ†æ&lt;/li&gt;
&lt;li&gt;NSObject MethodSwizzling class æ–¹æ³•&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;é‚£ä¹ˆsuper-class-ä¸-self-class-æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢&#34;&gt;é‚£ä¹ˆ[super class] ä¸ [self class] æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢&lt;/h2&gt;
&lt;p&gt;è™½ç„¶ç°åœ¨ç†è§£äº†ä¸¤è€…ç»“æœä¸€æ ·ï¼Œé‚£ä¹ˆ&lt;code&gt;[super class]&lt;/code&gt; æœ‰ä»€ä¹ˆç‰¹æ®Šçš„å‘¢ï¼Ÿä¹Ÿå°±æ˜¯&lt;code&gt;objc_super&lt;/code&gt; é‡Œé¢çš„ &lt;code&gt;class_getSuperclass([self class])&lt;/code&gt;, å­˜åœ¨çš„æ„ä¹‰æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ å…¶å®æœ¬è´¨å°±æ˜¯&lt;code&gt;objc_msgSendSuper&lt;/code&gt; ä¸&lt;code&gt;objc_msgSend&lt;/code&gt;æœ‰ä»€ä¹ˆåŒºåˆ«?&lt;/p&gt;
&lt;h3 id=&#34;objc_msgsend--objc_msgsendsuper-æµç¨‹&#34;&gt;objc_msgSend / objc_msgSendSuper æµç¨‹&lt;/h3&gt;
&lt;p&gt;objc_msgSendå…·ä½“æµç¨‹ å¯ä»¥çœ‹åˆ°è¿™ä¸ªobjc_msgSendæ…¢é€Ÿæµç¨‹ä¼šå»éå†çˆ¶ç±»ï¼Œæ¯”è¾ƒæ…¢ï¼Œobjc_msgSendSuperå°±å¯ä»¥è·³è¿‡å¾ˆå¤šéå†ï¼Œå˜å¾—æ›´å¿«äº†ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç»“è®º&#34;&gt;ç»“è®º&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;[self class]&lt;/code&gt; å°±æ˜¯å‘é€æ¶ˆæ¯&lt;code&gt;objc_msgSend&lt;/code&gt;ï¼Œæ¶ˆæ¯æ¥å—è€…æ˜¯&lt;code&gt;self&lt;/code&gt; â½…æ³•ç¼–å·ï¼š&lt;code&gt;class&lt;/code&gt;
&lt;code&gt;[super class]&lt;/code&gt; æœ¬è´¨å°±æ˜¯å‘é€æ¶ˆæ¯&lt;code&gt;objc_msgSendSuper&lt;/code&gt;, æ¶ˆæ¯çš„æ¥å—è€…è¿˜æ˜¯&lt;code&gt;self&lt;/code&gt; â½…æ³•ç¼–å·ï¼š&lt;code&gt;class&lt;/code&gt;
åªæ˜¯&lt;code&gt;objc_msgSendSuper&lt;/code&gt;ä¼šæ›´å¿« ç›´æ¥è·³è¿‡&lt;code&gt;self&lt;/code&gt; çš„æŸ¥æ‰¾&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        </item>
        
    </channel>
</rss>
